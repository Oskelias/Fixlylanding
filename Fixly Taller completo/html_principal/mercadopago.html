<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fixly - Configuración MercadoPago</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #4F46E5 0%, #7C3AED 100%);
        }
        .btn-mercadopago {
            background: #009ee3;
            transition: all 0.3s ease;
        }
        .btn-mercadopago:hover {
            background: #0089c7;
            transform: translateY(-2px);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        .success-animation {
            animation: bounce 2s infinite;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        .loading-dots {
            animation: loading 1.5s infinite;
        }
        @keyframes loading {
            0%, 80%, 100% { opacity: 0.2; }
            40% { opacity: 1; }
        }
        .webhook-log {
            max-height: 300px;
            overflow-y: auto;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <nav class="gradient-bg text-white py-4 px-6">
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <div class="flex items-center space-x-2">
                <i class="fas fa-tools text-2xl"></i>
                <span class="text-2xl font-bold">Fixly Taller</span>
            </div>
            <div class="text-sm">
                <span class="bg-white bg-opacity-20 px-3 py-1 rounded-full">
                    <i class="fas fa-credit-card mr-1"></i>
                    Configuración de Pagos
                </span>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-6 py-12">
        <!-- Plan Pro Section -->
        <div class="text-center mb-12">
            <h1 class="text-4xl font-bold text-gray-800 mb-4">Plan Pro - Acceso Completo</h1>
            <p class="text-xl text-gray-600">Paga y accede inmediatamente a Fixly Taller</p>
        </div>

        <div class="grid lg:grid-cols-2 gap-12">
            <!-- Plan Details -->
            <div class="bg-white rounded-2xl p-8 shadow-lg card-hover">
                <div class="text-center mb-8">
                    <div class="inline-block bg-green-500 text-white px-4 py-2 rounded-full text-sm font-semibold mb-4">
                        ✨ PLAN RECOMENDADO
                    </div>
                    <h2 class="text-3xl font-bold text-green-600 mb-2">Plan Pro</h2>
                    <div class="text-5xl font-bold text-gray-800 mb-2">
                        $19.900
                        <span class="text-lg font-normal text-gray-600">/ mes</span>
                    </div>
                    <p class="text-gray-600">Facturación mensual recurrente</p>
                </div>

                <div class="space-y-4 mb-8">
                    <div class="flex items-center">
                        <i class="fas fa-check text-green-500 mr-3"></i>
                        <span>Acceso inmediato al sistema completo</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-check text-green-500 mr-3"></i>
                        <span>Hasta 5 usuarios por taller</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-check text-green-500 mr-3"></i>
                        <span>WhatsApp automático ilimitado</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-check text-green-500 mr-3"></i>
                        <span>Soporte técnico prioritario</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-check text-green-500 mr-3"></i>
                        <span>Base de datos SQL segura</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-check text-green-500 mr-3"></i>
                        <span>Reportes y analíticas avanzadas</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-check text-green-500 mr-3"></i>
                        <span>Actualizaciones automáticas</span>
                    </div>
                </div>

                <!-- MercadoPago Button -->
                <button 
                    onclick="procesarSuscripcion()" 
                    class="btn-mercadopago w-full text-white py-4 px-6 rounded-xl font-semibold text-lg shadow-lg flex items-center justify-center"
                    id="btnSuscripcion">
                    <i class="fab fa-cc-mastercard mr-3 text-2xl"></i>
                    Suscribirme con MercadoPago
                </button>

                <div class="mt-4 text-center text-sm text-gray-500">
                    <i class="fas fa-lock mr-1"></i>
                    Pago seguro protegido por MercadoPago
                </div>
            </div>

            <!-- Process Status -->
            <div class="space-y-6">
                <!-- Status Card -->
                <div class="bg-white rounded-2xl p-8 shadow-lg" id="statusCard">
                    <h3 class="text-xl font-semibold mb-6 flex items-center">
                        <i class="fas fa-chart-line text-blue-600 mr-3"></i>
                        Estado del Proceso
                    </h3>
                    
                    <div class="space-y-4" id="processSteps">
                        <div class="flex items-center p-3 bg-gray-50 rounded-lg" id="step1">
                            <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center mr-3">
                                <span class="text-sm font-semibold text-white">1</span>
                            </div>
                            <span>Seleccionar plan Pro</span>
                        </div>
                        
                        <div class="flex items-center p-3 bg-gray-50 rounded-lg" id="step2">
                            <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center mr-3">
                                <span class="text-sm font-semibold text-white">2</span>
                            </div>
                            <span>Procesar pago en MercadoPago</span>
                        </div>
                        
                        <div class="flex items-center p-3 bg-gray-50 rounded-lg" id="step3">
                            <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center mr-3">
                                <span class="text-sm font-semibold text-white">3</span>
                            </div>
                            <span>Confirmar pago (webhook)</span>
                        </div>
                        
                        <div class="flex items-center p-3 bg-gray-50 rounded-lg" id="step4">
                            <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center mr-3">
                                <span class="text-sm font-semibold text-white">4</span>
                            </div>
                            <span>Generar credenciales</span>
                        </div>
                        
                        <div class="flex items-center p-3 bg-gray-50 rounded-lg" id="step5">
                            <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center mr-3">
                                <span class="text-sm font-semibold text-white">5</span>
                            </div>
                            <span>Enviar email de bienvenida</span>
                        </div>
                        
                        <div class="flex items-center p-3 bg-gray-50 rounded-lg" id="step6">
                            <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center mr-3">
                                <span class="text-sm font-semibold text-white">6</span>
                            </div>
                            <span>Acceso al sistema activado</span>
                        </div>
                    </div>

                    <!-- Success Message (Hidden initially) -->
                    <div class="hidden mt-6 p-4 bg-green-100 border border-green-300 rounded-lg" id="successMessage">
                        <div class="flex items-center">
                            <div class="success-animation text-green-600 text-2xl mr-3">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div>
                                <h4 class="font-semibold text-green-800">¡Suscripción Activada!</h4>
                                <p class="text-green-700 text-sm">Revisa tu email para las credenciales de acceso</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Webhook Logs -->
                <div class="bg-white rounded-2xl p-8 shadow-lg">
                    <h3 class="text-xl font-semibold mb-4 flex items-center">
                        <i class="fas fa-code text-purple-600 mr-3"></i>
                        Webhook Logs (Tiempo Real)
                    </h3>
                    <div class="webhook-log bg-black text-green-400 p-4 rounded-lg font-mono text-sm" id="webhookLogs">
                        <div>💻 Sistema de webhooks iniciado...</div>
                        <div>🔗 Endpoint: /webhook/mercadopago</div>
                        <div>⏳ Esperando notificaciones...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Generated Credentials (Hidden initially) -->
        <div class="hidden mt-12 bg-white rounded-2xl p-8 shadow-lg" id="credentialsCard">
            <h3 class="text-2xl font-semibold mb-6 text-center">
                <i class="fas fa-key text-yellow-500 mr-3"></i>
                Credenciales Generadas
            </h3>
            
            <div class="grid md:grid-cols-2 gap-6">
                <div class="bg-gray-50 p-6 rounded-xl">
                    <h4 class="font-semibold mb-3">📧 Datos de Acceso:</h4>
                    <div class="space-y-2 text-sm">
                        <div><strong>Email:</strong> <span id="userEmail">cliente@example.com</span></div>
                        <div><strong>Contraseña:</strong> <span id="userPassword" class="font-mono bg-yellow-200 px-2 py-1 rounded">FIXLY-2024-ABC123</span></div>
                        <div><strong>Taller ID:</strong> <span id="tallerId" class="font-mono">TLR-001</span></div>
                    </div>
                </div>
                
                <div class="bg-gray-50 p-6 rounded-xl">
                    <h4 class="font-semibold mb-3">⚙️ Configuración:</h4>
                    <div class="space-y-2 text-sm">
                        <div><strong>Plan:</strong> Pro</div>
                        <div><strong>Estado:</strong> <span class="text-green-600 font-semibold">Activo</span></div>
                        <div><strong>Usuarios:</strong> Hasta 5</div>
                        <div><strong>Próxima factura:</strong> <span id="nextBilling">15/09/2024</span></div>
                    </div>
                </div>
            </div>
            
            <div class="mt-6 text-center">
                <button 
                    onclick="accederAlSistema()" 
                    class="gradient-bg text-white py-3 px-8 rounded-xl font-semibold hover:opacity-90 transition-all">
                    <i class="fas fa-rocket mr-2"></i>
                    Acceder al Sistema Ahora
                </button>
            </div>
        </div>

        <!-- Email Preview -->
        <div class="hidden mt-8 bg-white rounded-2xl p-8 shadow-lg" id="emailPreview">
            <h3 class="text-xl font-semibold mb-6 flex items-center">
                <i class="fas fa-envelope text-blue-600 mr-3"></i>
                Email Enviado al Cliente
            </h3>
            
            <div class="border rounded-lg p-6 bg-gray-50">
                <div class="border-b pb-4 mb-4">
                    <div class="text-sm text-gray-600">Para: <span id="emailTo">cliente@example.com</span></div>
                    <div class="text-sm text-gray-600">Asunto: ¡Bienvenido a Fixly Taller! - Acceso Completo Activado</div>
                </div>
                
                <div class="space-y-4 text-sm">
                    <p><strong>¡Hola [Nombre del Taller]!</strong></p>
                    <p>🎉 ¡Tu suscripción al Plan Pro de Fixly Taller está activa!</p>
                    
                    <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500">
                        <p><strong>📧 Datos de Acceso:</strong></p>
                        <p>• Usuario: <span id="emailUser">cliente@example.com</span></p>
                        <p>• Contraseña: <span id="emailPass" class="font-mono">FIXLY-2024-ABC123</span></p>
                        <p>• Enlace: <a href="#" class="text-blue-600">https://test.fixlytaller.com/</a></p>
                    </div>
                    
                    <p>✅ <strong>Tu Plan Pro incluye:</strong></p>
                    <ul class="ml-4 space-y-1">
                        <li>• Acceso ilimitado al sistema</li>
                        <li>• Hasta 5 usuarios</li>
                        <li>• WhatsApp automático</li>
                        <li>• Soporte prioritario</li>
                    </ul>
                    
                    <p>💳 <strong>Facturación:</strong> $19.900/mes</p>
                    <p>📅 <strong>Próxima factura:</strong> <span id="emailBilling">15/09/2024</span></p>
                    
                    <p>¡Gracias por elegir Fixly Taller!</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Simulación del proceso de suscripción
        async function procesarSuscripcion() {
            const btn = document.getElementById('btnSuscripcion');
            const originalText = btn.innerHTML;
            
            // Disable button and show loading
            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Procesando...';
            
            // Step 1: Redirect to MercadoPago (simulated)
            await updateStep(1, 'Seleccionando plan Pro...', 'blue');
            await sleep(1000);
            
            // Step 2: Process payment
            await updateStep(2, 'Redirigiendo a MercadoPago...', 'blue');
            await sleep(2000);
            
            // Step 3: Webhook confirmation
            await updateStep(3, 'Confirmando pago...', 'blue');
            addWebhookLog('📥 Webhook recibido de MercadoPago');
            addWebhookLog('✅ Pago confirmado: $19.900');
            addWebhookLog('🔍 Validando transacción...');
            await sleep(2000);
            
            // Step 4: Generate credentials
            await updateStep(4, 'Generando credenciales...', 'blue');
            const credentials = generateCredentials();
            addWebhookLog('🔐 Credenciales generadas');
            addWebhookLog(`📧 Email: ${credentials.email}`);
            addWebhookLog(`🔑 Password: ${credentials.password}`);
            await sleep(1500);
            
            // Step 5: Send email
            await updateStep(5, 'Enviando email de bienvenida...', 'blue');
            showEmailPreview(credentials);
            addWebhookLog('📬 Email enviado exitosamente');
            await sleep(1500);
            
            // Step 6: System access activated
            await updateStep(6, 'Acceso al sistema activado', 'green');
            showCredentials(credentials);
            showSuccessMessage();
            addWebhookLog('🚀 Sistema activado para el cliente');
            addWebhookLog('✨ Proceso completado exitosamente');
            
            // Reset button
            btn.disabled = false;
            btn.innerHTML = '<i class="fas fa-check mr-2"></i> Suscripción Completada';
            btn.classList.remove('btn-mercadopago');
            btn.classList.add('bg-green-500', 'hover:bg-green-600');
        }
        
        async function updateStep(stepNum, message, color) {
            const step = document.getElementById(`step${stepNum}`);
            const circle = step.querySelector('.w-8');
            const text = step.querySelector('span');
            
            // Update appearance
            circle.className = `w-8 h-8 rounded-full flex items-center justify-center mr-3 ${
                color === 'blue' ? 'bg-blue-500' : 'bg-green-500'
            }`;
            
            if (color === 'blue') {
                circle.innerHTML = '<i class="fas fa-spinner fa-spin text-white text-sm"></i>';
            } else {
                circle.innerHTML = '<i class="fas fa-check text-white text-sm"></i>';
            }
            
            text.textContent = message;
            step.className = `flex items-center p-3 rounded-lg ${
                color === 'blue' ? 'bg-blue-50 border border-blue-200' : 'bg-green-50 border border-green-200'
            }`;
        }
        
        function addWebhookLog(message) {
            const logs = document.getElementById('webhookLogs');
            const time = new Date().toLocaleTimeString();
            logs.innerHTML += `<div>[${time}] ${message}</div>`;
            logs.scrollTop = logs.scrollHeight;
        }
        
        function generateCredentials() {
            const randomId = Math.random().toString(36).substr(2, 6).toUpperCase();
            const email = `cliente${Date.now()}@example.com`;
            const password = `FIXLY-2024-${randomId}`;
            const tallerId = `TLR-${randomId.substr(0, 3)}`;
            
            return {
                email,
                password,
                tallerId,
                nextBilling: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toLocaleDateString()
            };
        }
        
        function showCredentials(credentials) {
            document.getElementById('userEmail').textContent = credentials.email;
            document.getElementById('userPassword').textContent = credentials.password;
            document.getElementById('tallerId').textContent = credentials.tallerId;
            document.getElementById('nextBilling').textContent = credentials.nextBilling;
            document.getElementById('credentialsCard').classList.remove('hidden');
        }
        
        function showEmailPreview(credentials) {
            document.getElementById('emailTo').textContent = credentials.email;
            document.getElementById('emailUser').textContent = credentials.email;
            document.getElementById('emailPass').textContent = credentials.password;
            document.getElementById('emailBilling').textContent = credentials.nextBilling;
            document.getElementById('emailPreview').classList.remove('hidden');
        }
        
        function showSuccessMessage() {
            document.getElementById('successMessage').classList.remove('hidden');
        }
        
        function accederAlSistema() {
            // Redirect to main system
            window.open('https://test.fixlytaller.com/', '_blank');
        }
        
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Mark step 1 as completed
            updateStep(1, 'Plan Pro seleccionado ✓', 'green');
        });
    </script>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDqrJx2aftRzO4NN6XOCUJRAsWFc%2FDHUaREjoOkf%2FfYxsVK5nw54KyisUnrjxbmRgrp%2BzEuSvQDqBteyN8GY2WjRbay0XHzaEenCTDnMFmo27HakNIcTL3SwjJ6wEV%2BeZxwtpB0CCdv1upyoj1jZhyT9bhXa7TELG4Ph0B4vsqAlNWoBB%2BsUXNPYwH%2BxrEBOMAbnpqkk6D3h8GFbUD7chgaWRo5d6KZS%2B328Ig%2BGS2P8nnOLC5yWDasErX7kE8DxgexfOGN3qPysjh4LjWOIgy%2BNwPuQjeQUNmI3aLIKhWJkQ2APTUSoIJMOb6BhzDaFeR3IcBh7nAsXYp%2BM5icH8uUJT0t79CYrp21ApdviQmatYfeMfcjr6iEeTt2GYTH%2BHSP85z4M%2BXQ1%2FaDWk%2F0AJXp%2B25%2F8mOFRltG0TxlScop%2BxDV1HNJIa62UPF22Ji%2FDvJZwvm1z7HUQFnQpBhn13y34Nv7V7tqV2RqFUw6UiOfdeSRsRITPOh7eTRH2PYbJL6Q%3D%3D";
        window.__genspark_locale = "es-ES";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDqrJx2aftRzO4NN6XOCUJRAsWFc/DHUaREjoOkf/fYxsVK5nw54KyisUnrjxbmRgrp+zEuSvQDqBteyN8GY2WjRbay0XHzaEenCTDnMFmo27HakNIcTL3SwjJ6wEV+eZxwtpB0CCdv1upyoj1jZhyT9bhXa7TELG4Ph0B4vsqAlNWoBB+sUXNPYwH+xrEBOMAbnpqkk6D3h8GFbUD7chgaWRo5d6KZS+328Ig+GS2P8nnOLC5yWDasErX7kE8DxgexfOGN3qPysjh4LjWOIgy+NwPuQjeQUNmI3aLIKhWJkQ2APTUSoIJMOb6BhzDaFeR3IcBh7nAsXYp+M5icH8uUJT0t79CYrp21ApdviQmatYfeMfcjr6iEeTt2GYTH+HSP85z4M+XQ1/aDWk/0AJXp+25/8mOFRltG0TxlScop+xDV1HNJIa62UPF22Ji/DvJZwvm1z7HUQFnQpBhn13y34Nv7V7tqV2RqFUw6UiOfdeSRsRITPOh7eTRH2PYbJL6Q==";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    