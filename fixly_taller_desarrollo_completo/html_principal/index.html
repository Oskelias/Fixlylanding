<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fixly Taller - Gestiona tu Taller Profesionalmente</title>
  <meta name="description" content="Sistema completo para talleres de reparación: órdenes, técnicos, WhatsApp integrado y comprobantes listos para imprimir." />
  <meta name="theme-color" content="#4F46E5" />
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin />
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" />
  <style>
    .gradient-bg{background:linear-gradient(135deg,#4F46E5 0%,#7C3AED 100%)}
    .gradient-reverse{background:linear-gradient(135deg,#7C3AED 0%,#4F46E5 100%)}
    .btn-gratis{background:#F59E0B!important}
    .btn-gratis:hover{background:#D97706!important}
    .btn-contact{background:#10B981!important}
    .btn-contact:hover{background:#059669!important}
    .floating-shapes::before{content:'';position:absolute;width:200px;height:200px;border-radius:50%;background:rgba(255,255,255,.1);top:10%;right:10%;animation:float 6s ease-in-out infinite}
    .floating-shapes::after{content:'';position:absolute;width:150px;height:150px;border-radius:30%;background:rgba(255,255,255,.05);bottom:20%;left:15%;animation:float 8s ease-in-out infinite reverse}
    @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-20px)}}
    .card-hover{transition:.3s}.card-hover:hover{transform:translateY(-5px);box-shadow:0 20px 40px rgba(0,0,0,.1)}
    .highlight-card{background:linear-gradient(135deg,#4F46E5 0%,#7C3AED 100%);color:#fff}
    .highlight-card .text-gray-600{color:rgba(255,255,255,.9)!important}
    .security-bg{background:linear-gradient(135deg,#1E3A8A 0%,#3730A3 100%)}
    .nav-persistent{position:sticky;top:0;z-index:50}
    .whatsapp-mockup{min-height:600px}
    .whatsapp-messages{overflow:visible}
    /* Carrusel */
    .carousel-container{position:relative;width:100%}
    .carousel-slide{display:none;opacity:0;transition:opacity .5s;width:100%;height:340px;position:relative;overflow:hidden}
    .carousel-slide.active{display:block;opacity:1}
    .carousel-indicator{cursor:pointer}
    .carousel-indicator.active{background-color:#4F46E5!important}
    .carousel-prev,.carousel-next{cursor:pointer;user-select:none}
    .carousel-prev:hover,.carousel-next:hover{color:#4F46E5}
  </style>
</head>
<body class="bg-white">
  <!-- Navigation -->
  <nav class="gradient-bg text-white py-4 px-6 nav-persistent">
    <div class="max-w-7xl mx-auto flex items-center justify-between">
      <div class="flex items-center space-x-2">
        <i class="fas fa-tools text-2xl" aria-hidden="true"></i>
        <span class="text-2xl font-bold">Fixly Taller</span>
      </div>
      <div class="hidden md:flex space-x-8">
        <a href="#funcionalidades" class="hover:text-yellow-300 transition-colors">Funcionalidades</a>
        <a href="#whatsapp" class="hover:text-yellow-300 transition-colors">WhatsApp Integrado</a>
        <a href="#seguridad" class="hover:text-yellow-300 transition-colors">Seguridad</a>
        <a href="#precios" class="hover:text-yellow-300 transition-colors">Precios</a>
      </div>
      <div class="flex space-x-3">
        <a href="https://wa.me/5491165689145?text=Hola,%20quiero%20consultar%20sobre%20Fixly%20Taller"
           target="_blank" rel="noopener"
           class="btn-contact px-4 py-2 rounded-full font-semibold text-white hover:bg-green-600 transition-colors">
          <i class="fab fa-whatsapp mr-1" aria-hidden="true"></i>Contacto
        </a>
        <button type="button" onclick="abrirModal()" class="btn-gratis px-4 py-2 rounded-full font-semibold text-white hover:bg-orange-600 transition-colors">
          Probar Gratis
        </button>
      </div>
    </div>
  </nav>

  <!-- Hero -->
  <section class="gradient-bg text-white py-12 relative overflow-hidden floating-shapes">
    <div class="max-w-7xl mx-auto px-6">
      <div class="grid lg:grid-cols-2 gap-12 items-center">
        <div>
          <h1 class="text-5xl lg:text-6xl font-bold mb-6 leading-tight">
            Gestiona tu Taller <span class="text-yellow-300">Profesionalmente</span>
          </h1>
          <p class="text-xl mb-8 text-blue-100">
            Sistema completo para talleres de reparación. Ingresá órdenes, asigná técnicos especialistas, enviá WhatsApp automático y entregá con comprobantes listos para imprimir.
          </p>
          <div class="flex flex-col sm:flex-row gap-4">
            <button type="button" onclick="abrirModal()" class="btn-gratis px-8 py-4 rounded-full font-semibold text-white hover:bg-orange-600 transition-colors text-lg">
              <i class="fas fa-download mr-2" aria-hidden="true"></i>Descarga Demo Gratis
            </button>
            <a href="#precios" class="inline-block border-2 border-white px-8 py-4 rounded-full font-semibold hover:bg-white hover:text-purple-600 transition-colors text-lg text-center">
              Ver Planes
            </a>
          </div>
          <div class="flex items-center mt-8">
            <div class="flex text-yellow-300" aria-hidden="true">
              <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
            </div>
            <span class="ml-2 text-blue-100">Calificación 4.8/5 por +120 talleres</span>
          </div>
        </div>

        <!-- Carrusel -->
        <div class="relative">
          <div class="bg-white rounded-2xl shadow-2xl p-6 text-gray-800 h-full flex flex-col overflow-hidden" aria-label="Carrusel de funcionalidades">
            <div class="flex justify-center mb-4" role="tablist" aria-label="Paginación carrusel">
              <div class="flex space-x-2">
                <button class="carousel-indicator w-2 h-2 rounded-full bg-purple-600 transition-all duration-300" data-slide="0" aria-label="Slide 1"></button>
                <button class="carousel-indicator w-2 h-2 rounded-full bg-gray-300 transition-all duration-300" data-slide="1" aria-label="Slide 2"></button>
                <button class="carousel-indicator w-2 h-2 rounded-full bg-gray-300 transition-all duration-300" data-slide="2" aria-label="Slide 3"></button>
                <button class="carousel-indicator w-2 h-2 rounded-full bg-gray-300 transition-all duration-300" data-slide="3" aria-label="Slide 4"></button>
                <button class="carousel-indicator w-2 h-2 rounded-full bg-gray-300 transition-all duration-300" data-slide="4" aria-label="Slide 5"></button>
              </div>
            </div>

            <div class="carousel-container relative flex-1 overflow-hidden">
              <!-- Slides (sin cambios visuales) -->
              <!-- 1 -->
              <div class="carousel-slide active" data-slide="0">…</div>
              <!-- 2 -->
              <div class="carousel-slide" data-slide="1">…</div>
              <!-- 3 -->
              <div class="carousel-slide" data-slide="2">…</div>
              <!-- 4 -->
              <div class="carousel-slide" data-slide="3">…</div>
              <!-- 5 -->
              <div class="carousel-slide" data-slide="4">…</div>
            </div>

            <div class="flex justify-between items-center mt-4">
              <button class="carousel-prev text-gray-400 hover:text-gray-600 transition-colors" type="button" aria-label="Anterior">
                <i class="fas fa-chevron-left"></i>
              </button>
              <div class="text-xs text-gray-500 text-center">
                <span class="carousel-title">Dashboard - Estados Hoy</span>
              </div>
              <button class="carousel-next text-gray-400 hover:text-gray-600 transition-colors" type="button" aria-label="Siguiente">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>

  <!-- (Sección funcionalidades, WhatsApp, seguridad, testimonios y precios: SIN CAMBIOS VISUALES) -->
  <!-- ——— Mantengo tu contenido original aquí. ——— -->

  <!-- Final CTA -->
  <section class="py-12 gradient-bg text-white text-center">
    <div class="max-w-4xl mx-auto px-6">
      <h2 class="text-4xl font-bold mb-6">¿Listo para modernizar tu taller?</h2>
      <p class="text-xl mb-8 text-blue-100">Únete a más de 120 talleres que ya confían en Fixly Taller</p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a onclick="abrirModal()" href="javascript:void(0)" class="btn-gratis px-12 py-4 rounded-full font-semibold text-white text-lg hover:bg-orange-600 transition-colors">
          <i class="fas fa-download mr-2" aria-hidden="true"></i>Descarga Demo Gratis - 15 días
        </a>
        <a href="https://wa.me/5491165689145?text=Hola,%20quiero%20consultar%20sobre%20Fixly%20Taller" target="_blank" rel="noopener"
           class="btn-contact px-12 py-4 rounded-full font-semibold text-white text-lg hover:bg-green-600 transition-colors">
          <i class="fab fa-whatsapp mr-2" aria-hidden="true"></i>Contacto
        </a>
      </div>
    </div>
  </section>

  <footer class="bg-gray-800 text-white py-12">
    <div class="max-w-7xl mx-auto px-6 text-center">
      <div class="flex items-center justify-center mb-6">
        <i class="fas fa-tools text-2xl mr-2" aria-hidden="true"></i>
        <span class="text-2xl font-bold">Fixly Taller</span>
      </div>
      <p class="text-gray-400">© 2025 Fixly Taller. Sistema de gestión para talleres de reparación.</p>
    </div>
  </footer>

  <script>
    // ====== Config ======
    const API_BASE = 'https://fixly-backend.oscarelias.workers.dev''; // cambia acá si usás otro dominio

    // ====== Smooth scroll con offset fijo (navbar) ======
    document.querySelectorAll('a[href^="#"]').forEach(a=>{
      a.addEventListener('click',e=>{
        const id=a.getAttribute('href');
        if(!id||id==='#') return;
        const t=document.querySelector(id);
        if(!t) return;
        e.preventDefault();
        const top=t.getBoundingClientRect().top + window.pageYOffset - 60;
        window.scrollTo({top,behavior:'smooth'});
      });
    });

    // ====== Modales ======
    const modalRegistro = document.getElementById('modalRegistro');
    const modalContent  = document.getElementById('modalContent');
    const modalConf     = document.getElementById('modalConfirmacion');

    function abrirModal(){
      modalRegistro.classList.remove('hidden');
      setTimeout(()=>{ modalContent.classList.remove('scale-95','opacity-0'); modalContent.classList.add('scale-100','opacity-100'); },10);
      modalRegistro.setAttribute('role','dialog');
      modalRegistro.setAttribute('aria-modal','true');
      modalRegistro.setAttribute('aria-labelledby','modal-title');
      document.addEventListener('keydown',escClose);
    }
    function cerrarModal(){
      modalContent.classList.remove('scale-100','opacity-100');
      modalContent.classList.add('scale-95','opacity-0');
      setTimeout(()=>modalRegistro.classList.add('hidden'),300);
      document.removeEventListener('keydown',escClose);
    }
    function cerrarModalConfirmacion(){ modalConf.classList.add('hidden'); }
    function escClose(e){ if(e.key==='Escape') { cerrarModal(); cerrarModalConfirmacion(); } }

    // Cerrar al click fuera
    modalRegistro.addEventListener('click',e=>{ if(e.target===modalRegistro) cerrarModal(); });
    modalConf.addEventListener('click',e=>{ if(e.target===modalConf) cerrarModalConfirmacion(); });

    // ====== Envío del formulario (modal) ======
    let submitLock = false;
    async function enviarFormularioModal(btnEl){
      const empresa    = document.getElementById('modalNombreTaller').value.trim();
      const propietario= document.getElementById('modalNombrePropietario').value.trim();
      const email      = document.getElementById('modalEmail').value.trim();
      const telefono   = document.getElementById('modalTelefono').value.trim();
      const ciudad     = document.getElementById('modalCiudad').value.trim();

      if(!empresa || !propietario || !email){ alert('❌ Completá Taller, Propietario y Email'); return; }
      if(!/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(email)){ alert('❌ Email inválido'); return; }
      if(submitLock) return; submitLock = true;

      const original = btnEl ? btnEl.innerHTML : '';
      if(btnEl){ btnEl.innerHTML='<i class="fas fa-spinner fa-spin mr-2"></i>Enviando…'; btnEl.disabled=true; }

      try{
        const res = await fetch(`${API_BASE}/api/lead-registro`,{
          method:'POST',
          headers:{ 'Content-Type':'application/json' },
          body: JSON.stringify({
            empresa, propietario, email,
            telefono, direccion: ciudad,
            tipo:'landing_modal_integrado'
          })
        });

        // ok real (CORS correcto en el Worker)
        let ok = res.ok, data = {};
        try { data = await res.json(); } catch { /* puede venir sin body */ }
        if(ok && data && data.success !== false){
          mostrarConfirmacionModal({
            success:true,
            leadId: data.leadId || `lead_${Date.now()}`,
            notificaciones:{ telegram:'Enviado a nuestro equipo' }
          });
        }else{
          throw new Error(data.error || `HTTP ${res.status}`);
        }
      }catch(err){
        alert(`❌ No pudimos registrar tu solicitud. ${err.message}`);
      }finally{
        submitLock = false;
        if(btnEl){ btnEl.innerHTML = original; btnEl.disabled = false; }
      }
    }

    function mostrarConfirmacionModal(resultado){
      cerrarModal();
      document.getElementById('modalResultadoDetalle').innerHTML = `
        <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-4">
          <h3 class="text-green-800 font-semibold mb-2 text-sm">
            <i class="fas fa-check-circle mr-1"></i>¡Solicitud Procesada!
          </h3>
          <div class="space-y-1 text-green-700 text-sm">
            <p><i class="fas fa-id-badge mr-1"></i><strong>ID:</strong> ${resultado.leadId || 'Generado'}</p>
            <p><i class="fas fa-clock mr-1"></i><strong>Te contactaremos en 24 horas</strong></p>
            <p><i class="fas fa-gift mr-1"></i><strong>15 días gratuitos</strong> incluidos</p>
          </div>
        </div>
        <div class="bg-gray-50 rounded-lg p-3">
          <h4 class="font-semibold text-gray-800 mb-2 text-sm">Datos enviados:</h4>
          <div class="text-xs text-gray-600 space-y-1">
            <p><strong>Taller:</strong> ${document.getElementById('modalNombreTaller').value}</p>
            <p><strong>Email:</strong> ${document.getElementById('modalEmail').value}</p>
            <p><strong>Teléfono:</strong> ${document.getElementById('modalTelefono').value || 'No proporcionado'}</p>
          </div>
        </div>`;
      modalConf.classList.remove('hidden');
    }

    // ====== Carrusel ======
    let currentSlide = 0;
    const slides = document.querySelectorAll('.carousel-slide');
    const indicators = document.querySelectorAll('.carousel-indicator');
    const totalSlides = slides.length;
    let carouselInterval;

    const slideTitles = [
      'Dashboard - Estados Hoy','Gestión de Reparaciones','Notificar Cliente','Formulario de Pedidos','Comprobante A4'
    ];

    function showSlide(i){
      slides.forEach(s=>{ s.style.display='none'; s.style.opacity='0'; s.classList.remove('active'); });
      indicators.forEach(ind=>{ ind.classList.remove('active','bg-purple-600'); ind.classList.add('bg-gray-300'); });
      if(slides[i]){ slides[i].style.display='block'; slides[i].style.opacity='1'; slides[i].classList.add('active'); }
      if(indicators[i]){ indicators[i].classList.add('active'); indicators[i].classList.remove('bg-gray-300'); indicators[i].classList.add('bg-purple-600'); }
      const t=document.querySelector('.carousel-title'); if(t && slideTitles[i]) t.textContent=slideTitles[i];
      currentSlide=i;
    }
    const nextSlide = ()=>showSlide((currentSlide+1)%totalSlides);
    const prevSlide = ()=>showSlide((currentSlide-1+totalSlides)%totalSlides);
    function startAutoSlide(){ carouselInterval=setInterval(nextSlide,4000); }
    function stopAutoSlide(){ if(carouselInterval) clearInterval(carouselInterval); }

    document.addEventListener('DOMContentLoaded',()=>{
      const prev=document.querySelector('.carousel-prev');
      const next=document.querySelector('.carousel-next');
      prev?.addEventListener('click',()=>{ stopAutoSlide(); prevSlide(); startAutoSlide(); });
      next?.addEventListener('click',()=>{ stopAutoSlide(); nextSlide(); startAutoSlide(); });
      indicators.forEach((ind,idx)=> ind.addEventListener('click',()=>{ stopAutoSlide(); showSlide(idx); startAutoSlide(); }));
      const cont=document.querySelector('.carousel-container');
      cont?.addEventListener('mouseenter',stopAutoSlide);
      cont?.addEventListener('mouseleave',startAutoSlide);
      showSlide(0); startAutoSlide();
    });
  </script>

  <!-- Modal de Registro -->
  <div id="modalRegistro" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4" aria-hidden="true">
    <div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md relative transform transition-all duration-300 scale-95 opacity-0" id="modalContent">
      <button type="button" onclick="cerrarModal()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-2xl" aria-label="Cerrar">
        <i class="fas fa-times" aria-hidden="true"></i>
      </button>
      <div class="text-center mb-8">
        <div class="w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4">
          <i class="fas fa-tools text-white text-2xl" aria-hidden="true"></i>
        </div>
        <h1 id="modal-title" class="text-3xl font-bold text-gray-800 mb-2">Fixly Taller</h1>
        <p class="text-gray-600">Registro Gratuito - 15 días de prueba</p>
      </div>
      <div class="space-y-6">
        <div>
          <label class="block text-gray-700 font-semibold mb-2"><i class="fas fa-store mr-2 text-blue-500"></i>Nombre del Taller</label>
          <input type="text" id="modalNombreTaller" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Ej: Electrónica García" />
        </div>
        <div>
          <label class="block text-gray-700 font-semibold mb-2"><i class="fas fa-user mr-2 text-green-500"></i>Nombre del Propietario</label>
          <input type="text" id="modalNombrePropietario" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Ej: Juan García" />
        </div>
        <div>
          <label class="block text-gray-700 font-semibold mb-2"><i class="fas fa-envelope mr-2 text-purple-500"></i>Email</label>
          <input type="email" id="modalEmail" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="tu@email.com" />
        </div>
        <div>
          <label class="block text-gray-700 font-semibold mb-2"><i class="fas fa-phone mr-2 text-orange-500"></i>Teléfono</label>
          <input type="tel" id="modalTelefono" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="+54 11 1234-5678" />
        </div>
        <div>
          <label class="block text-gray-700 font-semibold mb-2"><i class="fas fa-map-marker-alt mr-2 text-red-500"></i>Ciudad</label>
          <input type="text" id="modalCiudad" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Buenos Aires" />
        </div>
        <button type="button" onclick="enviarFormularioModal(this)" class="w-full py-4 text-white font-bold rounded-lg text-lg transition-all duration-300 transform hover:scale-105" style="background:linear-gradient(135deg,#F59E0B,#D97706)">
          <i class="fas fa-rocket mr-2" aria-hidden="true"></i>Crear Mi Cuenta Gratuita
        </button>
      </div>
      <div class="mt-6 text-center text-sm text-gray-500">
        <p><i class="fas fa-shield-alt mr-1" aria-hidden="true"></i>100% Seguro y Gratuito</p>
        <p class="mt-1">Sin tarjeta de crédito requerida</p>
      </div>
    </div>
  </div>

  <!-- Modal Confirmación -->
  <div id="modalConfirmacion" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md relative max-h-[90vh] overflow-y-auto" role="dialog" aria-modal="true" aria-labelledby="confirm-title">
      <div class="sticky top-0 bg-white rounded-t-2xl p-6 border-b border-gray-100">
        <button type="button" onclick="cerrarModalConfirmacion()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-xl" aria-label="Cerrar">
          <i class="fas fa-times" aria-hidden="true"></i>
        </button>
        <div class="text-center">
          <div class="w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-3">
            <i class="fas fa-check text-white text-2xl" aria-hidden="true"></i>
          </div>
          <h1 id="confirm-title" class="text-2xl font-bold text-gray-800 mb-1">¡Registro Exitoso!</h1>
          <p class="text-gray-600 text-sm">Tu solicitud ha sido enviada correctamente</p>
        </div>
      </div>
      <div class="p-6 space-y-4">
        <div id="modalResultadoDetalle"></div>
        <div class="space-y-3 pt-2">
          <button type="button"
            onclick="window.open('https://wa.me/5491165689145?text='+encodeURIComponent('Hola, acabo de enviar mi solicitud de registro para Fixly Taller'),'_blank')"
            class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg transition-colors flex items-center justify-center" rel="noopener">
            <i class="fab fa-whatsapp mr-2 text-lg" aria-hidden="true"></i>Contactar por WhatsApp
          </button>
          <button type="button" onclick="cerrarModalConfirmacion()" class="w-full bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors">
            <i class="fas fa-arrow-left mr-2" aria-hidden="true"></i>Continuar Navegando
          </button>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
